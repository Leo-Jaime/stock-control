# ===============================
# DATASOURCE - PostgreSQL (Docker local dev)
# ===============================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/stockdb
quarkus.datasource.username=stock
quarkus.datasource.password=stock

# ===============================
# HIBERNATE
# ===============================
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# ===============================
# PROFILE: TEST (H2 in-memory)
# ===============================
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:stockdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1
%test.quarkus.datasource.username=sa
%test.quarkus.datasource.password=
%test.quarkus.hibernate-orm.database.generation=drop-and-create

# ===============================
# PROFILE: PROD (Render)
# ===============================
%prod.quarkus.datasource.jdbc.url=${DATABASE_URL}
%prod.quarkus.datasource.username=${DATABASE_USER}
%prod.quarkus.datasource.password=${DATABASE_PASSWORD}
%prod.quarkus.hibernate-orm.log.sql=false

# ===============================
# CORS
# ===============================
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ORIGINS:http://localhost:3000,http://localhost:5173}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization

# ===============================
# JWT - SmallRye
# ===============================
mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.verify.issuer=stock-control
smallrye.jwt.sign.key.location=privateKey.pem
smallrye.jwt.new-token.lifespan=86400

# ===============================
# HTTP
# ===============================
quarkus.http.port=${PORT:8080}